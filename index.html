<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Profil | Profesyonel Portföy</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            font-family: 'Inter', sans-serif;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .hover-lift {
            transition: all 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 antialiased">
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBF0bchfUsw4yo1q1wU-rowR8RZ24CDgJ0",
            authDomain: "mete-73d7c.firebaseapp.com",
            projectId: "mete-73d7c",
            storageBucket: "mete-73d7c.firebasestorage.app",
            messagingSenderId: "785562796791",
            appId: "1:785562796791:web:4ee9767daf4a13a981c9f2",
            measurementId: "G-191XRBGG83"
        };

        let db;
        const PROFILE_DOC_ID = 'main_professional_profile';

        const mainContent = document.getElementById('main-content');
        const loadingScreen = document.getElementById('loading-screen');

        async function setupFirebase() {
            try {
                console.log('Firebase başlatılıyor...');
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);

                const profileDocRef = doc(db, 'artifacts', 'mete-73d7c', 'public', 'data', 'profiles', PROFILE_DOC_ID);

                onSnapshot(profileDocRef, (docSnap) => {
                    console.log('Veri değişikliği algılandı:', docSnap.exists());
                    loadingScreen.classList.add('hidden');
                    mainContent.classList.remove('hidden');

                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        console.log('Profil verisi:', data);
                        renderProfile(data);
                    } else {
                        showNoDataMessage();
                    }
                }, (error) => {
                    console.error("Firestore hatası:", error);
                    loadingScreen.classList.add('hidden');
                    showErrorMessage();
                });

            } catch (error) {
                console.error("Firebase başlatma hatası:", error);
                loadingScreen.classList.add('hidden');
                showErrorMessage();
            }
        }

        function renderProfile(data) {
            // Temel bilgiler
            document.getElementById('profile-name').textContent = data.name || 'Adınız Soyadınız';
            document.getElementById('profile-title').textContent = data.title || 'Profesyonel Ünvanınız';
            document.getElementById('profile-bio').textContent = data.bioText || 'Kısa bir profesyonel özetiniz...';

            // Profil fotoğrafı
            const profileImg = document.getElementById('profile-photo');
            profileImg.src = data.photoURL || 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80';
            profileImg.alt = data.name || 'Profil Fotoğrafı';

            // Uzmanlık alanları
            const expertiseContainer = document.getElementById('expertise-container');
            expertiseContainer.innerHTML = (data.expertise || []).map(item => `
                <div class="group p-4 bg-white rounded-xl shadow-sm border border-gray-100 hover-lift fade-in">
                    <div class="w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center mb-3 group-hover:bg-blue-100 transition-colors">
                        <i data-lucide="${item.icon || 'star'}" class="w-6 h-6 text-blue-600"></i>
                    </div>
                    <h4 class="font-semibold text-gray-800 text-sm">${item.name}</h4>
                </div>
            `).join('');

            // Sosyal medya
            const socialContainer = document.getElementById('social-container');
            socialContainer.innerHTML = Object.entries(data.socials || {}).map(([key, url]) => {
                if (!url) return '';
                const icons = {
                    linkedin: 'linkedin',
                    github: 'github',
                    twitter: 'twitter',
                    email: 'mail'
                };
                const icon = icons[key] || 'link';
                return `
                    <a href="${url}" target="_blank" class="w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-sm hover:shadow-md transition-all hover-lift text-gray-600 hover:text-blue-600">
                        <i data-lucide="${icon}" class="w-5 h-5"></i>
                    </a>
                `;
            }).join('');

            // Eğitim
            const educationContainer = document.getElementById('education-container');
            educationContainer.innerHTML = (data.education || []).map(item => `
                <div class="fade-in">
                    <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover-lift">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <h3 class="font-bold text-gray-900 text-lg">${item.degree}</h3>
                                <p class="text-blue-600 font-medium text-sm">${item.institution}</p>
                            </div>
                            <span class="bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full font-medium">${item.years}</span>
                        </div>
                        <p class="text-gray-600 text-sm leading-relaxed">${item.description}</p>
                    </div>
                </div>
            `).join('');

            // Deneyim
            const experienceContainer = document.getElementById('experience-container');
            experienceContainer.innerHTML = (data.workExperience || []).map(item => `
                <div class="fade-in">
                    <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover-lift">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <h3 class="font-bold text-gray-900 text-lg">${item.title}</h3>
                                <p class="text-green-600 font-medium text-sm">${item.company}</p>
                            </div>
                            <span class="bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full font-medium">${item.years}</span>
                        </div>
                        <p class="text-gray-600 text-sm leading-relaxed">${item.description}</p>
                    </div>
                </div>
            `).join('');

            // İkonları yeniden oluştur
            lucide.createIcons();
        }

        function showNoDataMessage() {
            mainContent.innerHTML = `
                <div class="min-h-screen flex items-center justify-center px-4">
                    <div class="text-center max-w-md">
                        <div class="w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="user-x" class="w-10 h-10 text-yellow-600"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">Profil Bulunamadı</h2>
                        <p class="text-gray-600 mb-6">Profil verisi henüz oluşturulmamış. Yönetici paneline giderek profilinizi oluşturabilirsiniz.</p>
                        <a href="admin.html" class="inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                            <i data-lucide="settings" class="w-4 h-4"></i>
                            Yönetici Paneli
                        </a>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }

        function showErrorMessage() {
            mainContent.innerHTML = `
                <div class="min-h-screen flex items-center justify-center px-4">
                    <div class="text-center max-w-md">
                        <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i data-lucide="alert-circle" class="w-10 h-10 text-red-600"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">Bağlantı Hatası</h2>
                        <p class="text-gray-600 mb-4">Veritabanına bağlanırken bir hata oluştu. Lütfen daha sonra tekrar deneyin.</p>
                        <button onclick="location.reload()" class="inline-flex items-center gap-2 bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors">
                            <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                            Tekrar Dene
                        </button>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }

        // Sayfa yüklendiğinde Firebase'i başlat
        window.addEventListener('load', setupFirebase);
    </script>

    <!-- Yükleme Ekranı -->
    <div id="loading-screen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50">
        <div class="text-center">
            <div class="relative">
                <div class="w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto"></div>
                <div class="absolute inset-0 flex items-center justify-center">
                    <i data-lucide="user" class="w-6 h-6 text-blue-600"></i>
                </div>
            </div>
            <p class="mt-4 text-gray-600 font-medium">Profil yükleniyor...</p>
        </div>
    </div>

    <!-- Ana İçerik -->
    <div id="main-content" class="hidden">
        <!-- Hero Section -->
        <section class="gradient-bg text-white pt-20 pb-16">
            <div class="container mx-auto px-4 max-w-6xl">
                <div class="flex flex-col lg:flex-row items-center gap-8">
                    <!-- Profil Fotoğrafı -->
                    <div class="flex-shrink-0">
                        <div class="relative">
                            <img id="profile-photo" src="" alt="Profil" class="w-32 h-32 lg:w-40 lg:h-40 rounded-2xl object-cover shadow-2xl border-4 border-white/20">
                            <div class="absolute inset-0 rounded-2xl border-2 border-white/10"></div>
                        </div>
                    </div>
                    
                    <!-- Profil Bilgileri -->
                    <div class="flex-grow text-center lg:text-left">
                        <h1 id="profile-name" class="text-3xl lg:text-4xl font-bold mb-2">Adınız Soyadınız</h1>
                        <h2 id="profile-title" class="text-xl lg:text-2xl text-white/80 mb-4 font-light">Profesyonel Ünvanınız</h2>
                        
                        <!-- Sosyal Medya -->
                        <div id="social-container" class="flex justify-center lg:justify-start gap-3 mb-6"></div>
                        
                        <p id="profile-bio" class="text-white/80 text-lg leading-relaxed max-w-2xl">
                            Profesyonel özetiniz burada yer alacak...
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- İçerik Bölümü -->
        <div class="container mx-auto px-4 max-w-6xl -mt-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Sol Sütun -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Uzmanlık Alanları -->
                    <section class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center">
                                <i data-lucide="award" class="w-5 h-5 text-blue-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800">Uzmanlık Alanları</h3>
                        </div>
                        <div id="expertise-container" class="grid grid-cols-2 gap-4"></div>
                    </section>

                    <!-- İletişim -->
                    <section class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center">
                                <i data-lucide="phone" class="w-5 h-5 text-green-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800">İletişim</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center gap-3 text-gray-600">
                                <i data-lucide="mail" class="w-4 h-4"></i>
                                <span>ornek@email.com</span>
                            </div>
                            <div class="flex items-center gap-3 text-gray-600">
                                <i data-lucide="phone" class="w-4 h-4"></i>
                                <span>+90 555 123 4567</span>
                            </div>
                            <div class="flex items-center gap-3 text-gray-600">
                                <i data-lucide="map-pin" class="w-4 h-4"></i>
                                <span>İstanbul, Türkiye</span>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Sağ Sütun -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Eğitim -->
                    <section class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center">
                                <i data-lucide="graduation-cap" class="w-5 h-5 text-purple-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800">Eğitim Geçmişi</h3>
                        </div>
                        <div id="education-container" class="space-y-4"></div>
                    </section>

                    <!-- İş Deneyimi -->
                    <section class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center">
                                <i data-lucide="briefcase" class="w-5 h-5 text-orange-600"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800">İş Deneyimi</h3>
                        </div>
                        <div id="experience-container" class="space-y-4"></div>
                    </section>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white mt-16 py-8">
            <div class="container mx-auto px-4 max-w-6xl text-center">
                <p class="text-gray-400 text-sm">
                    © 2024 Tüm Hakları Saklıdır. Profesyonel Portföy
                </p>
            </div>
        </footer>
    </div>

    <script>
        // Lucide ikonlarını başlat
        lucide.createIcons();
    </script>
</body>
</html> 
